<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thi·ªáp 20/10 T∆∞∆°ng T√°c üå∏</title>
  <link href="https://fonts.googleapis.com/css2?family=Mali:wght@400;600&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
      font-family:"Mali",cursive;
      background:linear-gradient(135deg,#fff0f5,#ffeaf0);
      overflow:hidden;height:100vh;
    }

    .center-message{
      position:absolute;top:50%;left:50%;
      transform:translate(-50%,-50%);
      background:rgba(255,255,255,0.85);
      padding:30px 40px;border-radius:25px;
      text-align:center;color:#c2185b;
      box-shadow:0 20px 50px rgba(216,27,96,0.3);
      z-index:2;animation:float 4s ease-in-out infinite alternate;
    }
    @keyframes float{from{transform:translate(-50%,-52%);}to{transform:translate(-50%,-48%);}}
    .center-message strong{display:block;font-size:2rem;background:linear-gradient(45deg,#d81b60,#f48fb1);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:10px;}

    .falling-item{
      position:absolute;top:-80px;width:45px;animation:fall linear;cursor:pointer;z-index:2;
      animation-duration:8s;filter:drop-shadow(0 5px 10px rgba(0,0,0,0.2));
      transition:transform 0.3s;
    }
    .falling-item:hover{transform:scale(1.2);}
    @keyframes fall{
      0%{transform:translateY(0)rotate(0deg);opacity:1;}
      100%{transform:translateY(100vh)rotate(360deg);opacity:0;}
    }

    .popup{
      position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(0);
      background:white;border-radius:25px;box-shadow:0 15px 60px rgba(216,27,96,0.4);
      width:90%;max-width:420px;text-align:center;z-index:10;padding:25px;
      transition:all 0.4s ease;
    }
    .popup.active{transform:translate(-50%,-50%) scale(1);}
    .popup img{width:100%;border-radius:20px;margin-bottom:15px;}
    .popup p{color:#d81b60;font-weight:500;line-height:1.5;}
    .popup button{
      margin-top:15px;padding:10px 25px;border:none;border-radius:25px;
      background:linear-gradient(135deg,#d81b60,#f06292);color:white;
      font-weight:600;cursor:pointer;transition:0.3s;
    }
    .popup button:hover{transform:scale(1.05);background:linear-gradient(135deg,#ad1457,#e91e63);}
    .heart{
      position:absolute;pointer-events:none;animation:popHeart 1.6s ease-out forwards;
    }
    @keyframes popHeart{
      0%{transform:translate(-50%,-50%) scale(0.5);opacity:1;}
      100%{transform:translate(var(--dx),var(--dy)) scale(2);opacity:0;}
    }

    .input-name{
      position:fixed;bottom:20px;left:50%;transform:translateX(-50%);
      background:white;border-radius:25px;padding:8px 20px;
      box-shadow:0 8px 30px rgba(216,27,96,0.2);display:flex;gap:10px;z-index:5;
    }
    .input-name input{
      border:none;outline:none;font-family:"Mali";color:#d81b60;
    }
    .input-name button{
      border:none;background:#d81b60;color:white;padding:6px 15px;border-radius:20px;cursor:pointer;
    }
  </style>
</head>
<body>

  <div class="center-message" id="centerMessage">
    <strong>Ch√∫c m·ª´ng 20/10</strong>
    <span id="centerText">Ch·∫°m v√†o nh·ªØng m√≥n qu√† r∆°i ƒë·ªÉ nh·∫≠n l·ªùi ch√∫c üíù</span>
  </div>

  <div class="popup" id="popup">
    <img id="popupImage" src="">
    <p id="popupMessage"></p>
    <button id="nextBtn">Ti·∫øp t·ª•c üíñ</button>
  </div>

  <div class="input-name">
    <input type="text" id="nameInput" placeholder="Nh·∫≠p t√™n ng∆∞·ªùi nh·∫≠n..." />
    <button id="saveName">L∆∞u</button>
  </div>

  <audio id="bgm" src="./assets/a.mp3" preload="auto"></audio>

  <script>
    const gifts = ["./assets/a1.jpg","./assets/a2.jpg","./assets/a3.jpg","./assets/a4.jpg"];
    const messages = [
      "Ch√∫c <b>{name}</b> lu√¥n xinh ƒë·∫πp v√† ng·∫≠p tr√†n y√™u th∆∞∆°ng üíê",
      "H√¥m nay, m·ªçi √°nh s√°ng ƒë·ªÅu thu·ªôc v·ªÅ <b>{name}</b> ‚ú®",
      "C·∫£m ∆°n <b>{name}</b> v√¨ ƒë√£ mang ƒëi·ªÅu t·ªët ƒë·∫πp ƒë·∫øn th·∫ø gi·ªõi n√†y üíñ",
      "<b>{name}</b> ch√≠nh l√† ƒëo√° hoa ƒë·∫πp nh·∫•t c·ªßa ng√†y h√¥m nay üå∏"
    ];
    let userName = "b·∫°n";
    let index = 0;

    const popup = document.getElementById("popup");
    const popupImage = document.getElementById("popupImage");
    const popupMessage = document.getElementById("popupMessage");
    const nextBtn = document.getElementById("nextBtn");
    const centerText = document.getElementById("centerText");
    const bgm = document.getElementById("bgm");

    // Save name
    document.getElementById("saveName").onclick = () => {
      const name = document.getElementById("nameInput").value.trim();
      if(name){userName = name;centerText.innerHTML=`Xin ch√†o, ${userName}! H√£y ƒë√≥n nh·∫≠n m√≥n qu√† 20/10 üíå`;}
    };

    // Falling gifts
    function createGift(){
      const el=document.createElement("img");
      el.src=gifts[Math.floor(Math.random()*gifts.length)];
      el.classList.add("falling-item");
      el.style.left=Math.random()*(window.innerWidth-50)+"px";
      el.addEventListener("click",(e)=>{
        createHeartBurst(e.clientX,e.clientY);
        el.remove();
        showPopup();
      });
      document.body.appendChild(el);
      setTimeout(()=>el.remove(),8000);
    }
    setInterval(createGift,1200);

    // Popup logic
    function showPopup(){
      popup.classList.add("active");
      popupImage.src=gifts[index];
      popupMessage.innerHTML=messages[index].replaceAll("{name}",userName);
      index=(index+1)%messages.length;
      bgm.play();
    }
    nextBtn.onclick=()=>{
      popup.classList.remove("active");
      centerText.innerHTML="‚ù§Ô∏è "+popupMessage.innerHTML;
    };

    // Hearts burst
    function createHeartBurst(x,y){
      for(let i=0;i<12;i++){
        const h=document.createElement("div");
        h.className="heart";
        h.textContent="üíñ";
        const a=Math.random()*2*Math.PI;
        const d=Math.random()*80+40;
        h.style.left=x+"px";
        h.style.top=y+"px";
        h.style.setProperty('--dx',Math.cos(a)*d+'px');
        h.style.setProperty('--dy',Math.sin(a)*d+'px');
        document.body.appendChild(h);
        setTimeout(()=>h.remove(),1500);
      }
    }

    // Play bgm on first click anywhere
    document.body.addEventListener("click",()=>{if(bgm.paused)bgm.play();});
  </script>
</body>
</html>
