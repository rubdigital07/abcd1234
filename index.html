<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=no" />
  <title>Thi·ªáp 20/10 ‚Äì H√†nh Tr√¨nh N·ªü Hoa üå∏</title>
  <link href="https://fonts.googleapis.com/css2?family=Mali:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{--rose:#d81b60;--rose-2:#f06292;--bg1:#fff0f5;--bg2:#ffeaf0}
    body{font-family:"Mali",cursive;background:linear-gradient(135deg,var(--bg1),var(--bg2));height:100vh;overflow:hidden;color:var(--rose)}
    button{cursor:pointer;border:none;outline:none}
    .hidden{display:none !important}
    .center{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(255,255,255,.86);border-radius:28px;padding:28px 32px;text-align:center;box-shadow:0 20px 60px rgba(216,27,96,.28);backdrop-filter:saturate(1.1) blur(6px);width:min(92vw,720px)}
    .title{font-weight:700;font-size:2rem;background:linear-gradient(45deg,var(--rose),var(--rose-2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:8px}
    .desc{font-size:1.1rem;line-height:1.65}
    .btn{margin-top:18px;padding:12px 22px;border-radius:28px;color:#fff;background:linear-gradient(135deg,var(--rose),var(--rose-2));font-weight:700;box-shadow:0 8px 24px rgba(216,27,96,.32);transition:.25s transform;display:inline-flex;align-items:center;gap:.5rem}
    .btn:hover{transform:translateY(-1px) scale(1.02)}
    .btn-outline{background:#fff;color:var(--rose);border:2px solid var(--rose-2)}

    .falling{position:absolute;top:-80px;width:54px;user-select:none;animation:fall 9s linear forwards;filter:drop-shadow(0 6px 10px rgba(0,0,0,.18))}
    @keyframes fall{0%{transform:translateY(-10vh) rotate(0deg);opacity:1}100%{transform:translateY(110vh) rotate(360deg);opacity:.15}}

    .gift-wrap{display:flex;align-items:center;justify-content:center;gap:14px;margin-top:14px}
    .gift{width:120px;height:120px;border-radius:16px;background:#ffe2ec;display:flex;align-items:center;justify-content:center;box-shadow:0 16px 40px rgba(216,27,96,.25);position:relative;overflow:hidden}
    .ribbon{position:absolute;width:20px;height:100%;background:var(--rose);left:calc(50% - 10px)}
    .ribbon:before{content:"";position:absolute;top:calc(50% - 10px);left:-50px;right:-50px;height:20px;background:var(--rose)}
    .box-lid{position:absolute;top:-4px;left:8px;right:8px;height:22px;border-radius:12px;background:linear-gradient(45deg,#ffc2d6,#ffa3c5)}

    .flower-rise {position: fixed;left: 50%;bottom: 40%;transform: translateX(-50%) scale(0.8);width: 180px;opacity: 0;animation: flowerRise 2.4s ease-out forwards;z-index: 15;}
    @keyframes flowerRise {0% {opacity: 0;transform: translate(-50%, 40%) scale(0.8);}50% {opacity: 1;transform: translate(-50%, -10%) scale(1);}100% {opacity: 0;transform: translate(-50%, -50%) scale(1.2);}}

    .envelope {position: relative;width: 240px;height: 180px;margin: 0 auto 20px;perspective: 1000px;}
    .envelope-top {position: absolute;width: 100%;height: 100%;background: #ffc2d6;border-radius: 8px;transform-origin: top;transition: transform 0.8s ease;}
    .envelope.open .envelope-top {transform: rotateX(150deg);}
    .envelope-letter {position: absolute;inset: 0;background: #fff;border-radius: 8px;padding: 20px;box-shadow: 0 6px 20px rgba(0,0,0,0.2);transform: translateY(100%);opacity: 0;transition: all 0.8s ease 0.4s;}
    .envelope.open .envelope-letter {transform: translateY(0);opacity: 1;}
    .letter-text {font-size: 1.05rem;color: var(--rose);}
    .letter-deco {margin-top: 12px;font-size: 1.3rem;}
  </style>
</head>
<body>
  <section id="stage6" class="center">
    <div class="title">H·ªôp qu√† b√≠ m·∫≠t üéÅ</div>
    <p class="desc">Ch·∫°m m·ªü m·ªôt trong ba h·ªôp qu√†. B√™n trong l√† b√≥ hoa d√†nh cho b·∫°n!</p>
    <div id="giftWrap" class="gift-wrap">
      <div class="gift" data-i="0"><div class="box-lid"></div><div class="ribbon"></div></div>
      <div class="gift" data-i="1"><div class="box-lid"></div><div class="ribbon"></div></div>
      <div class="gift" data-i="2"><div class="box-lid"></div><div class="ribbon"></div></div>
    </div>
    <button id="btnToLetter" class="btn hidden">M·ªü thi·ªáp y√™u th∆∞∆°ng üíå</button>
  </section>

  <section id="stage7" class="center hidden">
    <div class="title">üíå M·ªü thi·ªáp y√™u th∆∞∆°ng</div>
    <div class="envelope" id="envelope">
      <div class="envelope-top"></div>
      <div class="envelope-letter">
        <p class="letter-text">Ch√∫c b·∫°n lu√¥n xinh ƒë·∫πp, h·∫°nh ph√∫c v√† ƒë∆∞·ª£c y√™u th∆∞∆°ng tr·ªçn v·∫πn m·ªói ng√†y üå∑</p>
        <div class="letter-deco">üíñüå∏üíñ</div>
      </div>
    </div>
    <button id="btnToEnd" class="btn btn-outline">K·∫øt th√∫c h√†nh tr√¨nh üå∑</button>
  </section>

  <script>
    const E = {
      giftWrap: document.getElementById('giftWrap'),
      btnToLetter: document.getElementById('btnToLetter'),
      envelope: document.getElementById('envelope'),
      btnToEnd: document.getElementById('btnToEnd')
    };

    function heartBurst(x,y,count=10){
      for(let i=0;i<count;i++){
        const h = document.createElement('div');
        h.textContent = 'üíñ';
        h.style.position='absolute';
        h.style.left=x+'px';
        h.style.top=y+'px';
        h.style.fontSize='20px';
        h.style.animation='burst 1.5s ease-out forwards';
        const a=Math.random()*Math.PI*2,d=60+Math.random()*80;
        h.style.setProperty('--dx',Math.cos(a)*d+'px');
        h.style.setProperty('--dy',Math.sin(a)*d+'px');
        document.body.appendChild(h);
        setTimeout(()=>h.remove(),1500);
      }
    }

    E.giftWrap.addEventListener('click',e=>{
      const box=e.target.closest('.gift');
      if(!box)return;
      const lid=box.querySelector('.box-lid');
      if(lid){lid.style.transition='transform .4s ease';lid.style.transform='translateY(-60px) rotate(-8deg)';}
      const flower=document.createElement('img');
      flower.src='./assets/bouquet.png';
      flower.className='flower-rise';
      document.body.appendChild(flower);
      const r=box.getBoundingClientRect();
      heartBurst(r.left+r.width/2,r.top+r.height/2,18);
      setTimeout(()=>flower.remove(),3000);
      setTimeout(()=>E.btnToLetter.classList.remove('hidden'),1000);
    });

    E.btnToLetter.addEventListener('click',()=>{
      document.getElementById('stage6').classList.add('hidden');
      document.getElementById('stage7').classList.remove('hidden');
    });

    E.envelope.addEventListener('click',()=>{
      E.envelope.classList.toggle('open');
    });
  </script>
</body>
</html>
